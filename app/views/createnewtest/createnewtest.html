<div class="test-container">
    <div class="dropdown-filters">
        <div class="dropdown-filter">
            <dropdownfilter-menu ng-model="categoryOptions.items" default-title="categoryOptions.title" ng-change="test.categoryId = selectedItem.value"
                                 type="categoryOptions.type" ontoggle="toggled(open)" class="filter-menu" scrollable="true"></dropdownfilter-menu>
            <div ng-if="validationFailed && test.categoryId === 0">
                <a>Выберите категорию теста</a>
            </div>
        </div>
        <div class="dropdown-filter">
            <dropdownfilter-menu ng-model="topicOptions.items" default-title="topicOptions.title" ng-change="test.topicId = selectedItem.value"
                                 type="topicOptions.type" ontoggle="toggled(open)" class="filter-menu" scrollable="true"></dropdownfilter-menu>
            <div ng-if="validationFailed && test.topicId === 0">
                <a>Выберите тему теста</a>
            </div>
        </div>
    </div>
    <div class="checkboxes-container">
        <div class="checkbox-div">
            <input type="checkbox" ng-model="test.private"><a>Закрытый тест</a>
        </div>
        <div class="checkbox-div">
            <input type="checkbox" ng-model="test.showCorrectAnswers"><a>Показывать правильные ответы по окончанию теста</a>
        </div>
    </div>
    <div ng-repeat="question in test.questions" class="question-container">
        <div class="question-info">
            <a>{{$index + 1}}.</a>
            <input ng-model="question.questionText" type="text" class="input-question-answer">
            <button ng-click="removeQuestion(question.questionNumber)" class="btn-remove"></button>
        </div>
        <div ng-if="validationFailed && question.questionText.trim() === ''">
            Введите текст вопроса
        </div>
        <div ng-if="validationFailed && calculateCorrectAnswers(question.questionNumber) === 0">
            Выберите как минимум один правильный ответ
        </div>
        <div ng-if="validationFailed && calculateCorrectAnswers(question.questionNumber) === question.answers.length">
            Оставьте как минимум один неправильный ответ
        </div>
        <div ng-repeat="answer in question.answers" class="answer-container">
            <a>{{$index + 1}}</a>.<input ng-model="answer.answerText" type="text" class="input-question-answer"><input type="checkbox" ng-model="answer.correct"><button ng-click="removeAnswer(question.questionNumber, answer.answerNumber)" class="btn-remove"></button>
            <div ng-if="validationFailed && answer.answerText.trim() === ''">
                Введите текст ответа
            </div>
        </div>
        <button ng-click="addAnswer(question.questionNumber)" class="btn-add"></button>
    </div>
    <button ng-click="addQuestion()" class="btn-add"></button>
    <dropdownfilter-menu ng-model="questionsCountOptions.items" default-title="questionsCountOptions.title"
                         type="questionsCountOptions.type" ontoggle="toggled(open)" class="filter-menu" scrollable="true"></dropdownfilter-menu>
    <button ng-click="createTest()">Создать тест</button>
</div>
